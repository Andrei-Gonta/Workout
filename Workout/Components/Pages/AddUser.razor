@page "/adduser"
@using Data_Base_Access
@using Data_Base_Access.Entities
@using Data_Base_Access.Repositories.NewFolder.IGenericRepository
@using Data_Base_Access.Repositories.UserRepository
@using Data_Base_Access.Repositories.UsersRepository
@using Microsoft.EntityFrameworkCore
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web
@attribute [StreamRendering]
@inject IGenericRepository<Users> userRepository
@inject NavigationManager NavigationManager


<h1>AddUser</h1>

<EditForm Model="newUser" OnSubmit="Submit" FormName="AddUser">
    <div class="form-control">
        <label>
            Name: 
            <InputText @bind-Value="newUser!.Name" class="form-control" />
        </label>
    </div>
    <div class="form-control">
        <label>
            Surname:
            <InputText @bind-Value="newUser!.Surname" class="form-control" />
        </label>
    </div>
    <div class="form-control">
        <label>
            Email:
            <InputText @bind-Value="newUser!.Email" class="form-control" />
        </label>
    </div>
    <div class="form-control">
        <label>
            Phone number:
            <InputText @bind-Value="newUser!.Phone" class="form-control" />
        </label>
    </div>
    <div class="form-control">
        <label>
            Weight:
            <InputNumber @bind-Value="newUser!.Weight" class="form-control" />
        </label>
    </div>
    <div    >
        <label>
            Age:
            <InputNumber @bind-Value="newUser!.Age" class="form-control" />
        </label>
    </div>
    <div><button type="submit" class="btn btn-primary">Add User</button></div>
</EditForm>






@code 
{
    
    [SupplyParameterFromForm]
    public Users newUser { get; set; }
    protected override void OnInitialized() => newUser ??= new();
    private async Task Submit()
    {
        if (newUser != null)    
        {
         await userRepository.AddAsync(newUser);
          
          NavigationManager.NavigateTo("/");
        }
    }
}
    

